server {
	listen 80 default_server;
	listen [::]:80 default_server;

	# SSL configuration
	#
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;
	ssl_certificate /etc/ssl/private/axel.testing.pem;
	ssl_certificate_key /etc/ssl/private/axel.testing.pem;

	# Note: You should disable gzip for SSL traffic.
	# See: https://bugs.debian.org/773332
	#
	# Read up on ssl_ciphers to ensure a secure configuration.
	# See: https://bugs.debian.org/765782

	root /data;

	# Add index.php to the list if you are using PHP
	index index.html;

	server_name _;

	location / {
		# First attempt to serve request as file, then
		# as directory, then fall back to displaying a 404.
		try_files $uri $uri/ =404;

    # Provide redirect paths to different protocols for testing.
    #   axel.testing/redirect/$PROTO/$PATH -> $PROTO://axel.testing/$PATH
    #
    # eg. https://axel.testing/redirect/ftp/kilobyte.txt
    #       redirects to
    #     ftp://axel.testing/kilobyte.txt
    #
    rewrite ^/redirect/http/(.*)$   http://axel.testing/$1  redirect;
    rewrite ^/redirect/https/(.*)$  https://axel.testing/$1 redirect;
    rewrite ^/redirect/ftp/(.*)$    ftp://axel.testing/$1   redirect;
    rewrite ^/redirect/ftps/(.*)$   ftps://axel.testing/$1  redirect;
	}
}
